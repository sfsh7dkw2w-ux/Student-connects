<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Portal</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,Arial,sans-serif;
  background:#eef2f5;
}
.topbar{
  background:#2d3e50;
  color:white;
  padding:15px;
  text-align:center;
  font-weight:bold;
  font-size:18px;
  cursor:pointer;
  user-select:none;
}
.subbar{
  background:#4f6d8c;
  color:white;
  padding:12px;
  text-align:center;
}
.container{ padding:15px; }

.card{
  background:white;
  border-radius:12px;
  padding:15px;
  margin-bottom:12px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}
.title{ font-weight:bold; }
.teacher{ color:#4f6d8c; margin-top:3px; }
.grade{ margin-top:8px; font-weight:bold; }

.assignment{
  margin-top:6px;
  padding:6px 8px;
  background:#f5f7fa;
  border-radius:6px;
  display:flex;
  justify-content:space-between;
}

.login{
  display:flex;
  justify-content:center;
  align-items:center;
  height:80vh;
}
.login button{
  padding:14px 24px;
  font-size:16px;
  border-radius:8px;
  border:none;
  background:#2d3e50;
  color:white;
  cursor:pointer;
}

.hidden{ display:none; }

/* Modal */
.modal{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.4);
  display:flex;
  justify-content:center;
  align-items:center;
}
.modal-content{
  background:white;
  padding:20px;
  border-radius:10px;
  width:90%;
  max-width:400px;
}
.modal-content input,
.modal-content select{
  width:100%;
  padding:10px;
  margin-top:10px;
  border-radius:6px;
  border:1px solid #ccc;
}
.modal-content button{
  margin-top:12px;
  padding:10px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.saveBtn{
  background:#2d3e50;
  color:white;
}
.closeBtn{
  background:#ccc;
}
</style>
</head>

<body>

<div class="topbar" id="header">Dearborn Public Schools</div>
<div class="subbar">Assignments</div>

<div class="container">

<div id="login" class="login">
  <button id="loginBtn">Sign In</button>
</div>

<div id="dashboard" class="hidden"></div>

</div>

<!-- Admin Modal -->
<div id="adminModal" class="modal hidden">
  <div class="modal-content">
    <h3>Add Assignment</h3>
    <select id="classSelect"></select>
    <input type="text" id="assignName" placeholder="Assignment Name">
    <button class="saveBtn" id="saveAssign">Save</button>
    <button class="closeBtn" id="closeModal">Close</button>
  </div>
</div>

<script>
(function(){

var ADMIN_PASSWORD = "20126693";

var classes = [
 {id:1,name:"Chemistry S2",teacher:"Bazzi-Hijazi, R"},
 {id:2,name:"Arabic 2 S2",teacher:"Raishouni, O"},
 {id:3,name:"PE/Health 9 Boys",teacher:"Hamade, M"},
 {id:4,name:"Language Arts 2",teacher:"Marwani, H"},
 {id:5,name:"AP Human Geography",teacher:"Jedele, S"},
 {id:6,name:"Algebra 2 S2",teacher:"AlHadrawi, M"}
];

var login = document.getElementById("login");
var loginBtn = document.getElementById("loginBtn");
var dashboard = document.getElementById("dashboard");
var header = document.getElementById("header");
var modal = document.getElementById("adminModal");
var classSelect = document.getElementById("classSelect");
var assignName = document.getElementById("assignName");

/* LOGIN */
loginBtn.addEventListener("click", function(){
  login.classList.add("hidden");
  dashboard.classList.remove("hidden");
  render();
});

/* RENDER */
function render(){
  dashboard.innerHTML="";
  for(var i=0;i<classes.length;i++){
    var c = classes[i];
    var assignments = JSON.parse(localStorage.getItem("assign_"+c.id) || "[]");

    var card=document.createElement("div");
    card.className="card";
    card.innerHTML="<div class='title'>"+c.name+"</div>"+
                   "<div class='teacher'>"+c.teacher+"</div>"+
                   "<div id='assign_"+c.id+"'></div>";
    dashboard.appendChild(card);

    var container=document.getElementById("assign_"+c.id);
    for(var j=0;j<assignments.length;j++){
      addAssignment(container,c.id,assignments[j],j);
    }
  }
}

/* ADD ASSIGNMENT DISPLAY */
function addAssignment(container,classId,name,index){
  var div=document.createElement("div");
  div.className="assignment";
  div.innerHTML="<span>"+name+"</span>"+
                "<span style='cursor:pointer;color:red;' data-class='"+classId+"' data-index='"+index+"'>âœ•</span>";
  container.appendChild(div);
}

/* DELETE */
document.addEventListener("click",function(e){
  if(e.target.getAttribute("data-class")){
    var classId=e.target.getAttribute("data-class");
    var index=e.target.getAttribute("data-index");
    var arr=JSON.parse(localStorage.getItem("assign_"+classId)||"[]");
    arr.splice(index,1);
    localStorage.setItem("assign_"+classId,JSON.stringify(arr));
    render();
  }
});

/* HIDDEN ADMIN */
var tapCount=0;
var timer=null;

header.addEventListener("click",function(){
  tapCount++;
  clearTimeout(timer);
  timer=setTimeout(function(){tapCount=0;},1000);
  if(tapCount===5){
    tapCount=0;
    unlockAdmin();
  }
});

function unlockAdmin(){
  var pass=prompt("Admin password:");
  if(pass!==ADMIN_PASSWORD) return;
  openModal();
}

/* MODAL */
function openModal(){
  classSelect.innerHTML="";
  for(var i=0;i<classes.length;i++){
    var opt=document.createElement("option");
    opt.value=classes[i].id;
    opt.textContent=classes[i].name;
    classSelect.appendChild(opt);
  }
  modal.classList.remove("hidden");
}

document.getElementById("closeModal").addEventListener("click",function(){
  modal.classList.add("hidden");
});

document.getElementById("saveAssign").addEventListener("click",function(){
  var classId=classSelect.value;
  var name=assignName.value.trim();
  if(!name) return;

  var arr=JSON.parse(localStorage.getItem("assign_"+classId)||"[]");
  arr.push(name);
  localStorage.setItem("assign_"+classId,JSON.stringify(arr));

  assignName.value="";
  modal.classList.add("hidden");
  render();
});

})();
</script>

</body>
</html>

