<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Portal</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,Arial,sans-serif;
  background:#eef2f5;
}
.topbar{
  background:#2d3e50;
  color:white;
  padding:15px;
  text-align:center;
  font-weight:bold;
  font-size:18px;
  cursor:pointer;
  user-select:none;
}
.subbar{
  background:#4f6d8c;
  color:white;
  padding:12px;
  text-align:center;
}
.container{ padding:15px; }

.card{
  background:white;
  border-radius:12px;
  padding:15px;
  margin-bottom:12px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}
.title{ font-weight:bold; }
.teacher{ color:#4f6d8c; margin-top:3px; }
.grade{ margin-top:8px; font-weight:bold; }

.login{
  display:flex;
  justify-content:center;
  align-items:center;
  height:80vh;
}
.login button{
  padding:12px 20px;
  font-size:16px;
  border-radius:8px;
  border:none;
  background:#2d3e50;
  color:white;
  cursor:pointer;
}
.login button:hover{
  opacity:0.9;
}

.hidden{ display:none; }
</style>
</head>

<body>

<div class="topbar" id="header">Dearborn Public Schools</div>
<div class="subbar" id="subbar">Assignments</div>

<div class="container">

  <div id="login" class="login">
    <button id="loginBtn">Sign In</button>
  </div>

  <div id="dashboard" class="hidden"></div>

</div>

<script>
(function(){

/* ================= CONFIG ================= */

var ADMIN_PASSWORD = "secureAdmin2026"; // change this
var classes = [
 {id:1,name:"Chemistry S2",teacher:"Bazzi-Hijazi, R"},
 {id:2,name:"Arabic 2 S2",teacher:"Raishouni, O"},
 {id:3,name:"PE/Health 9 Boys",teacher:"Hamade, M"},
 {id:4,name:"Language Arts 2",teacher:"Marwani, H"},
 {id:5,name:"AP Human Geography",teacher:"Jedele, S"},
 {id:6,name:"Algebra 2 S2",teacher:"AlHadrawi, M"}
];

/* ================= ELEMENTS ================= */

var login = document.getElementById("login");
var loginBtn = document.getElementById("loginBtn");
var dashboard = document.getElementById("dashboard");
var header = document.getElementById("header");

/* ================= LOGIN ================= */

loginBtn.addEventListener("click", function(){
  login.classList.add("hidden");
  dashboard.classList.remove("hidden");
  render();
});

/* ================= RENDER ================= */

function render(){
  dashboard.innerHTML = "";

  for(var i=0;i<classes.length;i++){
    var c = classes[i];
    var assignments = JSON.parse(localStorage.getItem("assign_"+c.id) || "[]");

    var percent = compute(assignments);
    var letter = grade(percent);

    var card = document.createElement("div");
    card.className = "card";
    card.innerHTML =
      "<div class='title'>" + c.name + "</div>" +
      "<div class='teacher'>" + c.teacher + "</div>" +
      "<div class='grade'>Grade: " +
      (letter ? letter : "--") +
      " (" + (percent ? percent.toFixed(1)+"%" : "--") + ")</div>";

    dashboard.appendChild(card);
  }
}

/* ================= GRADE CALC ================= */

function compute(list){
  if(!list.length) return null;
  var total=0, weight=0;
  for(var i=0;i<list.length;i++){
    total += (list[i].earned/list[i].possible)*list[i].weight;
    weight += list[i].weight;
  }
  return (total/weight)*100;
}

function grade(p){
  if(p==null) return null;
  if(p>=93) return "A";
  if(p>=90) return "A-";
  if(p>=87) return "B+";
  if(p>=83) return "B";
  if(p>=80) return "B-";
  if(p>=70) return "C";
  if(p>=60) return "D";
  return "F";
}

/* ================= HIDDEN ADMIN ================= */

var tapCount=0;
var timer=null;

header.addEventListener("click",function(){
  tapCount++;
  clearTimeout(timer);
  timer=setTimeout(function(){tapCount=0;},1000);

  if(tapCount===5){
    tapCount=0;
    unlockAdmin();
  }
});

function unlockAdmin(){
  var pass = prompt("Admin password:");
  if(pass !== ADMIN_PASSWORD) return;

  var classId = prompt("Class ID (1-6)?");
  if(!classId) return;

  var name = prompt("Assignment name?");
  if(!name) return;

  var earned = parseFloat(prompt("Points earned?"));
  var possible = parseFloat(prompt("Points possible?"));
  var weight = parseFloat(prompt("Weight? (1 default)")) || 1;

  var arr = JSON.parse(localStorage.getItem("assign_"+classId) || "[]");
  arr.push({earned:earned,possible:possible,weight:weight});
  localStorage.setItem("assign_"+classId,JSON.stringify(arr));

  render();
}

})();
</script>

</body>
</html>
